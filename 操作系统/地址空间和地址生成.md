---
title: 地址空间和地址生成

date: 2021-05-17 12:29:21

tags: [操作系统]

categories: [操作系统]
---

## 地址空间和地址生成

### 地址空间定义

- 物理地址空间 — 硬件支持的地址空间
  - 起始地址0，直到MAXsys
- 逻辑地址空间 — 在CPU运行的进程看到的地址
  - 起始地址0，直到MAXprog

### 逻辑地址的生成

![逻辑地址的生成](/Users/yanzhiwei/Documents/learn/uploads/ljdzsc.png)

### 地址生成时机和限制

- 编译时
  - 假设起始地址已知
  - 如果起始地址改变，必须重新编译
- 加载时
  - 如果编译起始位置未知，编译器需生成可重定位的代码（relocatable code）
  - 加载时，生成绝对地址
- 执行时
  - 执行时代码可移动
  - 需地址转换（映射）硬件支持

### 地址生成过程

- CPU
  - ALU：需要逻辑地址的内存内容
  - MMU：进行逻辑地址和屋里地址的转换
  - CPU控制逻辑：给总线发送物理地址请求
- 内存
  - 发送物理地址的内容给CPU
  - 或接受CPU数据到物理地址
- 操作系统
  - 建立逻辑地址LA和物理地址PA的映射关系

### 地址检查

![地址检查](/Users/yanzhiwei/Documents/learn/uploads/dzjc.png)