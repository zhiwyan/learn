## 进程、线程、协程

### 进程与线程

- 运行中的程序，就是进程；进程是操作系统分配资源的基本单位。
- 线程是进程中的一条执行流程；线程是操作系统调度的基本单位。linux中，线程是一种特殊的进程。

- 一个进程由一个或者多个线程组成,线程是一个进程中代码的不同线路；
- 进程之间相互独立，同一进程下的各个线程之间共享程序的内存空间（包括代码段、数据段、堆等）及一些进程级的资源（如打开文件和信号），进程内的线程在其他进程不可见；
- 线程的上下文切换比进程上下文切换要快的多



### 协程

- 协程不是被操作系统内核所管理的，由程序完全控制（在用户态运行）。
- 协程运行在线程上，协程执行完成之后，可以选择主动让出，让另一个协程运行在当前线程上。
- 一个线程可以拥有多个协程，在线程的基础上通过分时复用的方式运行多个协程。



### 进程描述符及任务结构

内核把进程的列表存放在叫做任务列表（task list）的双向循环链表中。链表中的每一项都是类型为 task_struct （进程描述符 process descriptor）的结构。进程描述符中包含一个具体进程的所有信息。

### 进程状态

进程描述符中的state域描述了进程的当前状态。系统中的每个进程都必然处于五种进程状态中的一种。

- TASK_RUNNING（运行）-  进程是可执行的；它或者正在执行，或者在运行队列中等待执行。
- TASK_INTERRUPTIBLE（可中断）-   进程正在睡眠（被阻塞），等待某些条件达成。
- TASK_UNINTERRUPTIBLE（不可中断）-   进程正在睡眠（被阻塞），等待某些条件达成。接收到信号不会提前唤醒
- __TASK_TRACED   -   被其他进程跟踪的进程，例如通过 ptrace 对调试程序进行跟踪。
- __TASK_STOPED（停止）-   进程停止执行。

